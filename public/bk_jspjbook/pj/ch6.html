<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width">
<meta charset="utf-8">
<title>JavaScript ProjectBook</title>
<style>
    caption{font-size: 32px;}
    table{width: 320px}
    table, th{background: #333}
    th{padding-right: 10px; height: 80px;}
    td{height: 75px; text-align: center}
    th > input{width: 100%; border: none; background: #333; color: white; text-align: right; font-size: 48px}
    td > input[type="button"]{width: 100%; height: inherit; color: #333; font-size: 36px; border: none}
    td > input[type="button"]:hover{background: #999}
    td:last-child > input{background: orange; color: white}
</style>
<script src="./js/jquery-3.1.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <form name="cal">
        <table>
            <caption>계산기</caption>
            <tr>
                <th colspan="4">
                    <input type="text" name="result" value="0">
                </th>
            </tr>
            <tr>
                <td><input type="button" value="7"></td>
                <td><input type="button" value="8"></td>
                <td><input type="button" value="9"></td>
                <td><input type="button" value="+"></td>
            </tr>
            <tr>
                <td><input type="button" value="4"></td>
                <td><input type="button" value="5"></td>
                <td><input type="button" value="6"></td>
                <td><input type="button" value="-"></td>
            </tr>
            <tr>
                <td><input type="button" value="1"></td>
                <td><input type="button" value="2"></td>
                <td><input type="button" value="3"></td>
                <td><input type="button" value="*"></td>
            </tr>
            <tr>
                <td colspan="2"><input type="button" value="0"></td>
                <td><input type="button" value="%"></td>
                <td><input type="button" value="/"></td>
            </tr>
            <tr>
                <td colspan="2"><input type="button" class="cls_btn" value="clear" ></td>
                <td colspan="2"><input type="button" class="result_btn" value="="></td>
            </tr>
        </table>
    </form>
<script>
    $(function(){
        // var inp = document.forms["cal"];
        // var input = inp.getElementsByTagName("input");
        // var cls_btn = document.getElementsByClassName("cls_btn")[0];
        // var result_btn = document.getElementsByClassName("result_btn")[0];

        var inp = $("form[name=cal]");
        var input = inp.find("input"); //전부를 찾아서 지정
        var cls_btn = $(".cls_btn");
        var result_btn = $(".result_btn");
        var result = inp.find("input[name=result]");

        function clr(){
            // inp["result"].value = 0;
            result.val(0);
        }

        function calc(value){
            // if(inp["result"].value == 0){
            //     inp["result"].value = "";
            // }
            // inp["result"].value += value;
            if(result.val() == 0){
                result.val("");
            }
            var val = result.val()+value;
            result.val(val);
        }

        // 계산 결과 처리 함수
        function my_result(){
            // var result = document.forms["cal"]["result"];
            // var calc = eval(result.value);
            var calc = eval(result.val());

            // 결과창에 표시
            // inp["result"].value = calc;
            result.val(calc);
        }



        // for(var i = 0; i < input.length; i++){
        //     // 숫자와 사칙 연산 버튼
        //     if(input[i].value != "=" && input[i].value != "clear"){
        //         input[i].onclick = function(){
        //             calc(this.value)
        //         }
        //     }
        // }
        $("input").click(function(){
            var input_value = $(this).val();
            if(input_value != "=" && input_value != "clear"){
                calc(input_value);
            }
        });


        // cls_btn.onclick = function(){
        //     clr();
        // }
        $(".cls_btn").click(function(){
            clr();
        });

        // result_btn.onclick = function(){
        //     try{
        //         my_result()
        //     }catch(err){
        //         var result = inp["result"];
        //         result.value = "입력 오류";
        //     }
        // }
        $(".result_btn").click(function(){
            try{
                my_result();
            }catch(err){
                result.val("입력 오류");
            }
        });

    });

</script>
</body>
</html>